# Кижи Часть 3

### Дебаггер языка Кижи

##### Тестовое задание на стажировку в СКБ Контур 2020г.

Всем понравился язык Кижи, но работать с ним трудно, потому что разработчики не могут понять ошибки в программах. Чтобы помочь разработчикам — напиши дебаггер к своему языку.

[Скачай проект KizhiPart3](https://ulearn.me/Exercise/StudentZip?courseId=backend-internship-2020&slideId=35c9eeee-5f67-4f26-8a11-11a65ac58103) и реализуй в нем метод ExecuteLine класса Debugger.

Вывод необходимо писать в передаваемый через конструктор TextWriter

#### Ввод

```
set code
def test
	set a 5
	sub a 3
	print b
call test
end set code
add break 2
run
print mem
```

#### Вывод

```
a 5 1
```

#### Исполнение программы дебаггером происходим следующим образом:

1. Программа загружается в дебаггер (команды для загрузки кода такие же как в предыдущей части)
2. Задаются breakpoint-ы с помощью команд для дебаггера
3. Происходит интерпретация до точки останова
4. После интерпретации всего кода, программа завершается

#### Описание синтаксиса команд для дебаггера:

- add break {line} - добавить точку останова на линию {line}
- step over - перейти к следующей линии без входа в функцию
- step - перейти на следующую исполняемую линию
- print mem- вывести все переменные
- print trace - вывести стектрейс
- run - исполнить программу до следующей точки останова

где {line} - номер строки, строки в программе начинаются с нуля.

#### Формат вывода всех переменных:

{var_name} {value} {line}

{var_name} {value} {line}

{var_name} {value} {line}

…

{var_name} - имя переменной

{value} - значение переменной

{line} - строка последнего изменения переменной

Порядок вывода переменных из памяти неважен и в тестах не учитывается.

#### Формат вывода стектрейса:

{line} {function_name}

{line} {function_name}

...

{line} - номер строки с именем функции, номер именно строки с call

{function_name} - имя вызываемой функции

Стектрейс расположен в порядке от последней вызванной функции до первой.

#### На что обратить внимание

- Должна работать рекурсия произвольной глубины.
- Определение функций может быть после основного кода.
- Память после интерпретации всей программы должна очищаться.
- step over должен игнорировать брейк пойнты внутри функции, исполнять функцию и переходить к следующей строке.

